<!DOCTYPE html>
<html lang="en">

<head>
    <title>Iglesia Cristiana Visión de Fe</title>
    <meta charset="UTF-8">
    <meta name="description" content="Arcade - Architecture Template">
    <meta name="keywords" content="arcade, architecture, onepage, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon -->
    <link href="img/icono.jpg" rel="shortcut icon" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/owl.carousel.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/fontello.css" />
    <link rel="stylesheet" href="css/estilos.css" />


    <!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>

<body>
    <a href="https://wa.me/50236554949" class="btn-wsp" target="_blank">
        <i class="icon-whatsapp"></i>
    </a>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>
 
    <!-- Header section start -->
    <header class="header-area">
        <a href="index.html" class="logo-area">
            <img src="img/logo.png" alt="" width="300" height="150">
        </a>
        <div class="nav-switch">
            <i class="fa fa-bars"></i>
        </div>
        <div class="top-bar">
            <nav class="nav-menu">
                <ul>
                    <li class="active"><a href="index.html">Inicio</a></li>
                    <li><a href="QuienesSomos.html">¿Quienes somos?</a></li>
                    <li><a href="Enseñanzas.html">Enseñanzas</a></li>
                    <li><a href="Transmisiones.html">Transmisiones</a></li>
                    <li><a href="Noticias.html">Noticias</a></li>
                    <li><a href="Peticiones.html">Peticiones de Oración</a></li>
                    <li><a href="Contacto.html">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header> 
    <!-- Header section end -->


    <!-- Page header section start -->
    <section class="page-header-section set-bg" data-setbg="img/header-bg-2.jpg">
        <div class="container">
            <h1 class="header-title">
                Contáctanos
            </h1>
        </div>
    </section>
    <!-- Page header section end -->


    <!-- Page section start -->
    <section class="page-section pt100">
        <div class="container pb100">

            <div class="row">
                <div class="col-lg-3 contact-info mb-5 mb-lg-0">
                    <p>Dirección: 4 Calle 5-52 zona 13 guatemala 01013-Guatemala, Guatemala </p>
                    <p>Teléfono: +(502) 2292 0286</p>
                    <p>Teléfono para reservaciones: +(502) 3655 4949</p>
                    <p>Correo electrónico: informacion@visiondefe.org.gt</p>
                </div>
                <div class="col-lg-9">
                    <form class="contact-form">
                        <input type="text" name = "nombre" id = "nombre" placeholder="Ingrese su nombre">
                        <input type="text" name = "correo" id = "correo" placeholder="Ingrese su correo electrónico">
                        <textarea name = "email" id = "email" placeholder="Escriba un mensaje"></textarea>
                        <button type = "button" onclick = "sendEmail()" class="btn btn-outline-success">Enviar</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- Page section end -->




    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
    <div class="copyright">Copyright &copy;
        <script>
            document.write(new Date().getFullYear());
        </script> All rights reserved. <br>This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></div>
    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
    <!--</footer>-->
    <!-- Footer section end -->



    <!--====== Javascripts & Jquery ======-->
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.owl-filter.js"></script>
    <script src="js/magnific-popup.min.js"></script>
    <script src="js/circle-progress.min.js"></script>
    <script src="js/main.js"></script>

    <!-- load for map -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB0YyDTa0qqOjIerob2VTIwo_XVMhrruxo"></script>
    <script src="js/map.js"></script>
    <script>
    function sendEmail(){
    //Extrayendo los datos de los campos de texto del HTML
    var nombre = document.querySelector('#nombre').value;
    var correo = document.querySelector('#correo').value;
    var email = document.querySelector('#email').value;

    //Guardando los datos en un JSON
    var objeto = {
      'nombre': nombre,
      'email': correo,
      'message': email
    }

    //Manda un mensaje a consola de que si se recibe el click
    console.log(objeto);

    //Hacinedo uso del fetch donde:
    /* EL METODO MAGICO - EL FETCH
            El fetch es el que nos permite crear peticiones HTTPS, la estructura es simple.
            Debemos de ingresarle una ruta, es la ruta del endpoint que queremos consumir, seguido de ello
            agregamos un objeto con los atributos de la peticion
                method: Puede ser GET, POST, PUT, DELETE
                body: Si el endpoint necesita un body, se le manda en este valor
                        - Agregarle el metodo JSON.stringify(objeto)
                headers: Estas normalmente no cambian, son las propiedades del metodo
        */

    //Haciendo las peticiones a la api de flask por medio de Fetch
    fetch(`http://localhost:5000/send-email-contacto`, {
        method: 'POST',
        body: JSON.stringify(objeto),
        headers:{   
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',}})
            //Parte del try-catch - siempre debe realizarse por aquello de los fallos
        .then(res => res.json())
        .catch(err => {
            console.error('Error:', err)
            alert("Error al enviar el email intente de nuevo.")
        })
        //Practicamente aquí se esta diciendo que si el .then de antes funcione se ejecute este nuevo .then
        //Este response es el encargado de administrar las operaciones a realizar con los datos del servidor.
        .then(response =>{
            console.log(response);
            alert(response.Mensaje)
            location.href = "Contacto.html";
        })
}
    </script>
</body>

</html>